{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nimport React, { Component } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { db } from \"../config/config\";\nimport { ref, onValue, remove } from 'firebase/database';\nimport ItensComponente from \"./Itens\";\nimport EditarItem from \"./Editar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar ListarItens = function (_Component) {\n  function ListarItens() {\n    var _this;\n    _classCallCheck(this, ListarItens);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, ListarItens, [].concat(args));\n    _this.state = {\n      itens: [],\n      itemSelecionado: null\n    };\n    _this.excluirItem = function (id) {\n      var itemRef = ref(db, `escola/${id}`);\n      remove(itemRef).then(function () {\n        console.log('Item excluído com sucesso!');\n      }).catch(function (error) {\n        console.error('Erro ao excluir o item:', error);\n      });\n    };\n    _this.carregarItem = function (id) {\n      var itemRef = ref(db, `escola/${id}`);\n      onValue(itemRef, function (snapshot) {\n        var data = snapshot.val();\n        if (data) {\n          _this.setState({\n            itemSelecionado: _objectSpread({\n              id: id\n            }, data)\n          });\n        } else {\n          console.error('Item não encontrado no banco de dados.');\n        }\n      });\n    };\n    return _this;\n  }\n  _inherits(ListarItens, _Component);\n  return _createClass(ListarItens, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n      var itensRef = ref(db, 'escola');\n      onValue(itensRef, function (snapshot) {\n        var data = snapshot.val();\n        if (data) {\n          var itens = Object.keys(data).map(function (key) {\n            return _objectSpread({\n              id: key,\n              item: data[key].item || 'Item não definido'\n            }, data[key]);\n          });\n          _this2.setState({\n            itens: itens\n          });\n        } else {\n          _this2.setState({\n            itens: []\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n      return _jsx(View, {\n        style: estilos.conteudo,\n        children: this.state.itemSelecionado ? _jsx(EditarItem, {\n          itemSelecionado: this.state.itemSelecionado,\n          onAtualizacaoConcluida: function onAtualizacaoConcluida() {\n            return _this3.setState({\n              itemSelecionado: null\n            });\n          }\n        }) : this.state.itens.length > 0 ? _jsx(ItensComponente, {\n          itens: this.state.itens,\n          excluirItem: this.excluirItem,\n          carregarItem: this.carregarItem\n        }) : _jsx(Text, {\n          children: \"Nenhum item salvo!\"\n        })\n      });\n    }\n  }]);\n}(Component);\nvar estilos = StyleSheet.create({\n  conteudo: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\nexport default ListarItens;","map":{"version":3,"names":["React","Component","View","Text","StyleSheet","db","ref","onValue","remove","ItensComponente","EditarItem","jsx","_jsx","ListarItens","_Component","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_callSuper","concat","state","itens","itemSelecionado","excluirItem","id","itemRef","then","console","log","catch","error","carregarItem","snapshot","data","val","setState","_objectSpread","_inherits","_createClass","key","value","componentDidMount","_this2","itensRef","Object","keys","map","item","render","_this3","style","estilos","conteudo","children","onAtualizacaoConcluida","create","flex","justifyContent","alignItems"],"sources":["C:/Users/Keven Rafael/Desktop/livro/livro/componentes/listar.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { View, Text, StyleSheet } from 'react-native';\r\nimport { db } from '../config/config';\r\nimport { ref, onValue, remove } from 'firebase/database';\r\nimport ItensComponente from './Itens';\r\nimport EditarItem from './Editar';\r\n\r\nclass ListarItens extends Component {\r\n    state = {\r\n        itens: [],\r\n        itemSelecionado: null,\r\n    };\r\n\r\n    componentDidMount() {\r\n        const itensRef = ref(db, 'escola');\r\n        onValue(itensRef, (snapshot) => {\r\n            let data = snapshot.val();\r\n            if (data) {\r\n                let itens = Object.keys(data).map(key => ({\r\n                    id: key,\r\n                    item: data[key].item || 'Item não definido',\r\n                    ...data[key],\r\n                }));\r\n                this.setState({ itens });\r\n            } else {\r\n                this.setState({ itens: [] });\r\n            }\r\n        });\r\n    }\r\n\r\n    excluirItem = (id) => {\r\n        const itemRef = ref(db, `escola/${id}`);\r\n        remove(itemRef)\r\n            .then(() => {\r\n                console.log('Item excluído com sucesso!');\r\n            })\r\n            .catch((error) => {\r\n                console.error('Erro ao excluir o item:', error);\r\n            });\r\n    };\r\n\r\n    carregarItem = (id) => { // método que carrega o item\r\n        const itemRef = ref(db, `escola/${id}`);\r\n        onValue(itemRef, (snapshot) => {\r\n            const data = snapshot.val();\r\n            if (data) {\r\n                this.setState({ itemSelecionado: { id, ...data } });\r\n            } else {\r\n                console.error('Item não encontrado no banco de dados.');\r\n            }\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <View style={estilos.conteudo}>\r\n                {this.state.itemSelecionado ? ( // itemSelecionado tiver valor então mostra o\r\n                    <EditarItem\r\n                        itemSelecionado={this.state.itemSelecionado}\r\n                        onAtualizacaoConcluida={() => \r\n                            this.setState({ itemSelecionado: null })}\r\n                    />\r\n                ) : (\r\n                    this.state.itens.length > 0 ? (\r\n                        <ItensComponente \r\n                            itens={this.state.itens} \r\n                            excluirItem={this.excluirItem} \r\n                            carregarItem={this.carregarItem} \r\n                        />\r\n                    ) : (\r\n                        <Text>Nenhum item salvo!</Text>\r\n                    )\r\n                )}\r\n            </View>\r\n        );\r\n    }\r\n}\r\n\r\nconst estilos = StyleSheet.create({\r\n    conteudo: {\r\n        flex: 1,\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n\r\n    },\r\n});\r\n\r\nexport default ListarItens;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}